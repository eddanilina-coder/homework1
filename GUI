from PyQt6.QtWidgets import QApplication, QWidget, QVBoxLayout, QLabel, QTextEdit
from PyQt6.QtCore import Qt
import sys


class SimpleTextAnalyzer(QWidget):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞")
        self.resize(500, 400)
        
        # –°–æ–∑–¥–∞—é –º–∞–∫–µ—Ç
        layout = QVBoxLayout()
        layout.setSpacing(15)
        
        # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        title_label = QLabel("–ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞")
        title_label.setStyleSheet("""
            font-weight: bold; 
            font-size: 16px; 
            color: #2c3e50;
            padding: 10px;
        """)
        title_label.setAlignment(Qt.AlignmentFlag.AlignCenter)
        layout.addWidget(title_label)
        
        # –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞
        input_label = QLabel("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç:")
        input_label.setStyleSheet("font-size: 12px; color: #34495e;")
        layout.addWidget(input_label)
        
        self.text_input = QTextEdit()
        self.text_input.setMinimumHeight(150)
        self.text_input.setPlaceholderText("–ù–∞–ø–∏—à–∏—Ç–µ –∑–¥–µ—Å—å —Å–≤–æ–π —Ç–µ–∫—Å—Ç...")
        layout.addWidget(self.text_input)
        # –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
        separator = QLabel("‚îÄ" * 50)
        separator.setStyleSheet("color: #bdc3c7;")
        separator.setAlignment(Qt.AlignmentFlag.AlignCenter)
        layout.addWidget(separator)
        # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
        result_label = QLabel("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞:")
        result_label.setStyleSheet("""
            font-weight: bold; 
            font-size: 14px; 
            color: #27ae60;
            margin-top: 10px;
        """)
        layout.addWidget(result_label)
        # –í–∏–¥–∂–µ—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        self.result_label = QLabel("–ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã...")
        self.result_label.setStyleSheet("""
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            font-size: 12px;
            min-height: 100px;
        """)
        self.result_label.setWordWrap(True)
        layout.addWidget(self.result_label)
        # –ü–æ–¥—Å–∫–∞–∑–∫–∞
        hint_label = QLabel("üí° –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–∫—Å—Ç–∞")
        hint_label.setStyleSheet("font-size: 10px; color: #7f8c8d; font-style: italic;")
        hint_label.setAlignment(Qt.AlignmentFlag.AlignCenter)
        layout.addWidget(hint_label)
        layout.addStretch()
        self.setLayout(layout)
        # –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∏–≥–Ω–∞–ª
        self.text_input.textChanged.connect(self.analyze_text)
    
    def analyze_text(self):
        #–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        text = self.text_input.toPlainText()
        if not text.strip():
            self.result_label.setText("–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É")
            return
        # –ü—Ä–æ—Å—Ç—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        words = text.split()
        word_count = len(words)
        char_count = len(text)
        char_no_spaces = len(text.replace(" ", ""))
        # –ü–æ–¥—Å—á–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
        sentences = text.count('.') + text.count('!') + text.count('?')
        if sentences == 0 and word_count > 0:
            sentences = 1
        # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        if word_count < 50:
            complexity = "–ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç"
        elif word_count < 200:
            complexity = "–°—Ä–µ–¥–Ω–∏–π —Ç–µ–∫—Å—Ç"
        else:
            complexity = "–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç"
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        result = f"""
        {complexity}
         –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
        ‚Ä¢ –°–ª–æ–≤: {word_count}
        ‚Ä¢ –°–∏–º–≤–æ–ª–æ–≤: {char_count}
        ‚Ä¢ –ë–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤: {char_no_spaces}
        ‚Ä¢ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π: {sentences}
         –°—Ä–µ–¥–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:
        ‚Ä¢ –°–ª–æ–≤ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏: {word_count//max(sentences, 1):.1f}
        ‚Ä¢ –°–∏–º–≤–æ–ª–æ–≤ –≤ —Å–ª–æ–≤–µ: {char_no_spaces//max(word_count, 1):.1f}
        """
        self.result_label.setText(result)
if __name__ == "__main__":
    app = QApplication(sys.argv)
    app.setStyleSheet("""
        QWidget {
            font-family: 'Arial', sans-serif;
        }
        QTextEdit {
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 8px;
            font-size: 13px;
        }
        QTextEdit:focus {
            border-color: #2980b9;
        }
    """)
    
    window = SimpleTextAnalyzer()
    window.show()
    app.exec()
